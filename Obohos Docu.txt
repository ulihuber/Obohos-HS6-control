Obohos Docu
-----------

 Project: Crane remote interface for nRF905 based OBOHOS HS-6 Systems
 Uses nRF905 Radio Library for Arduino (by Zak Kemble)
 Copyright: (C) 2026 by Uli Huber
 License: GNU GPL v3 
 
 Features:
 - Added Python script to calculate frequency/channel and address from OBOHOS serial number
 - Tested only for remotes in the 433MHz band
 - Connects to best SSID from provided list
 - Interfaces with HomeAssistant by MQTT discovery
 - Allows concurrent switching of power from OBOHOS HS-6 remote and HomeAssistant
 - Provides automatic power down after timeout (to avoid leaving it switched on...)
 - Provides network time for debug and other purposes


Serial-Number 
-------------
The serial number of the HS-6 remotes has coded information about the used channel 
and address. The information below is the result of analysing the internal protocol of three HS-6 remotes and therefore empiric. It might not fit to all remotes. There are older serial numbers with a 2-digit frequency code that do not match. 

Example:  710C334
710: 	lower part of 4 dig hex address (assume 0710)
C:		unknown, Separator?
3:    unknown
34: 	channel indicator.  channel=int(((430.3 + 34/10)-422.4)*10) = 0x71

The 32 bit hex address is built from first 3 or 4 hex digits and a suffix "0006"
Because of LSB reversal it is 0x10070006

Obohos.py is a simple calculator for address and channel.

If the calculation fails, the only way to get the information is tapping the PIC16F716, where the SPI-Protocol to the NRF905 is handled.
Pin 1 : MISO
Pin2  : MOSI
Pin19 : SCK
Pin20 : SS
I got the data with PulseView, which has a nice decoder for the NRF905.

Basic configuration
-------------------
The remotes all have a payload size of 2, 32-bit addresses and 8-bit CRC.
The NRF905 chip ignores all communications with not matching payload size and/or wrong address and/or wrong CRC.
Of course the frequency/channel must match too.
The other configurations in the "nRF905 Radio Library" can remain unchanged.


Necessary configurations
------------------------

nRF905_config.h in library needs not to be edited

Defines for the actual remote and local settings are in Obohos.h:

#define CHANNEL 0x71
#define RXADDR  0x40060006 // Address of this device
#define TXADDR  0x40060006 // Address of device to send to
and
#define DEVICE_NAME "Obohos" 

const char *mqtt_server   = "homeassistant";   //"homeassistant.local";        
network address of MQTT server
const char *mqtt_user     = "user";            // MQTT Username here
const char *mqtt_password = "password";        // MQTT Password here

const char* timeZone = "CET-1CEST,M3.5.0,M10.5.0/3";

Networks nets[] = { { "SSID1", "password1" },  // table of available SSIDs
                    { "SSID2", "password2" } };


